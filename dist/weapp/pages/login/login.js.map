{"version":3,"file":"pages/login/login.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://AppStarCardWXSS/./src/pages/login/login.tsx?4903","webpack://AppStarCardWXSS/._src_pages_login_login.tsx"],"sourcesContent":["import _regenerator from \"C:/Users/\\u9648\\u6587\\u5E94/Desktop/GoodHealth-Friend-main/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/\\u9648\\u6587\\u5E94/Desktop/GoodHealth-Friend-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/Users/\\u9648\\u6587\\u5E94/Desktop/GoodHealth-Friend-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/\\u9648\\u6587\\u5E94/Desktop/GoodHealth-Friend-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"C:/Users/\\u9648\\u6587\\u5E94/Desktop/GoodHealth-Friend-main/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"C:/Users/\\u9648\\u6587\\u5E94/Desktop/GoodHealth-Friend-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"C:/Users/\\u9648\\u6587\\u5E94/Desktop/GoodHealth-Friend-main/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _class;\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { Component, Fragment } from 'react';\nimport { Button, View } from '@tarojs/components';\nimport { PageSkeleton, Native } from '@hb/taro-fusion-components';\nimport { observer } from 'mobx-react';\nimport Taro from '@tarojs/taro';\nimport loginModel from '@/models/loginModel';\nimport { requestWxLoginMockApi } from '@/services/apis/login.api';\nimport './login.scss';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = observer(_class = /*#__PURE__*/function (_Component) {\n  function Login() {\n    var _this;\n    _classCallCheck(this, Login);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Login, [].concat(args));\n    _defineProperty(_this, \"handleBack\", function () {\n      Native.navigateBack();\n    });\n    _defineProperty(_this, \"handleLoginSuccess\", function (res) {\n      loginModel.setLoginResult(res);\n      Native.showToast('登录成功');\n      setTimeout(function () {\n        _this.handleBack();\n      }, 500);\n    });\n    _defineProperty(_this, \"handleLoginFail\", function (error) {\n      Native.showToast(error.message);\n    });\n    // 微信授权登录\n    _defineProperty(_this, \"handleWxAuth\", /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var loginRes, result, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.p = _context.n) {\n          case 0:\n            _context.p = 0;\n            // 显示加载提示\n            Taro.showLoading({\n              title: '登录中...',\n              mask: true\n            });\n\n            // 获取微信登录凭证 code\n            // 注意：getUserProfile 已废弃，现在只需要获取 code 即可\n            // 用户昵称和头像等信息可以通过后端接口获取\n            _context.n = 1;\n            return Taro.login();\n          case 1:\n            loginRes = _context.v;\n            if (loginRes.code) {\n              _context.n = 2;\n              break;\n            }\n            Taro.hideLoading();\n            Native.showToast('获取微信登录凭证失败');\n            return _context.a(2);\n          case 2:\n            _context.n = 3;\n            return requestWxLoginMockApi({\n              code: loginRes.code\n            });\n          case 3:\n            result = _context.v;\n            Taro.hideLoading();\n\n            // 登录成功，保存登录信息（包含 openId）\n            // eslint-disable-next-line no-console\n            console.log('登录成功，返回数据:', result);\n            _this.handleLoginSuccess(result.data);\n            _context.n = 5;\n            break;\n          case 4:\n            _context.p = 4;\n            _t = _context.v;\n            Taro.hideLoading();\n            // eslint-disable-next-line no-console\n            console.error('登录失败:', _t);\n            Native.showToast((_t === null || _t === void 0 ? void 0 : _t.message) || '登录失败，请重试');\n          case 5:\n            return _context.a(2);\n        }\n      }, _callee, null, [[0, 4]]);\n    })));\n    return _this;\n  }\n  _inherits(Login, _Component);\n  return _createClass(Login, [{\n    key: \"componentDidShow\",\n    value: function componentDidShow() {\n      Native.hideHomeButton();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsx(PageSkeleton, {\n        className: \"page-login-view\",\n        children: /*#__PURE__*/_jsxs(Fragment, {\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"top-gradient-bg\"\n          }), /*#__PURE__*/_jsx(View, {\n            className: \"back-btn\",\n            onClick: this.handleBack,\n            children: /*#__PURE__*/_jsx(View, {\n              className: \"back-icon\"\n            })\n          }), /*#__PURE__*/_jsxs(View, {\n            className: \"logo-section\",\n            children: [/*#__PURE__*/_jsx(View, {\n              className: \"logo-box\",\n              children: /*#__PURE__*/_jsx(View, {\n                className: \"logo-text\",\n                children: \"\\u661F\\u5361\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              className: \"slogan\",\n              children: \"\\u4E2D\\u68C0\\u3001\\u6D77\\u5173\\u4E92\\u8BA4\\u7684AI\\u9274\\u5B9A\\u56E2\\u4F53\\u6807\\u51C6\"\n            })]\n          }), /*#__PURE__*/_jsxs(View, {\n            className: \"login-actions\",\n            children: [/*#__PURE__*/_jsx(Button, {\n              className: \"wx-auth-btn\",\n              onClick: this.handleWxAuth,\n              children: \"\\u5FAE\\u4FE1\\u6388\\u6743\\u767B\\u5F55\"\n            }), /*#__PURE__*/_jsx(View, {\n              className: \"phone-login-text\",\n              children: \"\\u624B\\u673A\\u53F7\\u767B\\u5F55/\\u6CE8\\u518C\"\n            })]\n          })]\n        }, \"scroll\")\n      });\n    }\n  }]);\n}(Component)) || _class;\nexport { Login as default };","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/login/login!./login.tsx\"\nvar config = {\"navigationBarTitleText\":\"登录\",\"navigationStyle\":\"custom\"};\n\n\n\nvar taroOption = createPageConfig(component, 'pages/login/login', {root:{cn:[]}}, config || {})\nif (component && component.behaviors) {\n  taroOption.behaviors = (taroOption.behaviors || []).concat(component.behaviors)\n}\nvar inst = Page(taroOption)\n\n\n\nexport default component\n"],"names":[],"sourceRoot":""}