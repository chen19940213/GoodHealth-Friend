{"version":3,"file":"common.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1BA;AAEA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AAIA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AAKA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;;;;;AC1FA;AAEA;AAEA;;;;;;;;;;;;;;;;;;;ACJA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;;;;ACLA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAIA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAGA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;AAAA;AAAA;;;;;;;;;;;;;AC1FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;;;;;;;;;;;;;;;ACrDA;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AAGA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAbA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAjFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoFA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;;;;;;;;;;;;;;;;;;;;;;;;ACjBA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAMA;AACA;;AAEA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAKA;AACA;;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AAIA;AACA;;AAEA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAKA;AACA;;AAEA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAKA;AACA;;AAEA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAvFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0FA;;;;;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACJA;AACA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC1BA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://AppStarCardWXSS/./src/assets/index/index.ts","webpack://AppStarCardWXSS/./src/common/env.ts","webpack://AppStarCardWXSS/./src/common/events.ts","webpack://AppStarCardWXSS/./src/common/native.ts","webpack://AppStarCardWXSS/./src/common/tianqi.ts","webpack://AppStarCardWXSS/./src/components/cardCell/index.tsx","webpack://AppStarCardWXSS/./src/constants/app.const.ts","webpack://AppStarCardWXSS/./src/constants/page.const.ts","webpack://AppStarCardWXSS/./src/models/loginModel.ts","webpack://AppStarCardWXSS/./src/models/myModel.ts","webpack://AppStarCardWXSS/./src/models/photoModel.ts","webpack://AppStarCardWXSS/./src/services/actions.ts","webpack://AppStarCardWXSS/./src/services/apis/app.api.ts","webpack://AppStarCardWXSS/./src/utils/jumpTo.ts"],"sourcesContent":["import stats_card_icon from './stats_card_icon.png';\nimport back_white_icon from '@/assets/icons/back_white_icon.png';\nimport forward_icon from '@/assets/icons/forward_icon.png';\n\nexport const IMG_header_banner = 'https://m.hellobike.com/resource/gallery/146/WH7JGaID_shelves-ranking-bg.jpg?x-oss-process=image/quality,q_80';\nexport const IMG_stats_card_icon = stats_card_icon;\nexport const backWhiteIcon = back_white_icon;\nexport const forwardIcon = forward_icon;\nexport const StarCard_icon = 'https://m.hellobike.com/resource/gallery/92/0OS9ymV4_taichi_image.png';\nexport const StarCard_icon_white = 'https://m.hellobike.com/resource/gallery/92/GP4xS2lW_taichi_image.png';\nexport const StarCard_home_bg = 'https://m.hellobike.com/resource/gallery/92/dlEYQJR1_taichi_image.png';\nexport const scanIcon = 'https://m.hellobike.com/resource/gallery/92/RNR6sCCR_taichi_image.png';\nexport const identifyText = 'https://m.hellobike.com/resource/gallery/92/WKS6PzmB_taichi_image.png';\nexport const identifyText_icon = 'https://m.hellobike.com/resource/gallery/92/21jUo7pP_taichi_image.png';\nexport const historySectionTitle = 'https://m.hellobike.com/resource/gallery/92/kiVCxiso_taichi_image.png';\nexport const cardDecoration = 'https://m.hellobike.com/resource/gallery/92/LXjbY5z__taichi_image.png';\nexport const appraisalPassed = 'https://m.hellobike.com/resource/gallery/92/Z_vTBn4T_taichi_image.png';\nexport const resultBgImage = 'https://m.hellobike.com/resource/gallery/92/Lw0SD8W5_taichi_image.png';\nexport const checkSuccess = 'https://m.hellobike.com/resource/gallery/92/BvUA7uS0_taichi_image.png';\nexport const settingsIcon = 'https://m.hellobike.com/resource/gallery/92/QvxK6yms_taichi_image.png';\nexport const exampleImage1 = 'https://m.hellobike.com/resource/gallery/92/7fVot3e1_taichi_image.png';\nexport const exampleImage2 = 'https://m.hellobike.com/resource/gallery/92/xcivWDGk_taichi_image.png';\nexport const exampleImage3 = 'https://m.hellobike.com/resource/gallery/92/FRIx5-E5_taichi_image.png';\nexport const exampleImage4 = 'https://m.hellobike.com/resource/gallery/92/6IT_s0mi_taichi_image.png';\nexport const albumIcon = 'https://m.hellobike.com/resource/gallery/92/IJdS5p2o_taichi_image.png';\nexport const torchIcon = 'https://m.hellobike.com/resource/gallery/92/bC9vHsae_taichi_image.png';\nexport const underAppraisalBg = 'https://m.hellobike.com/f46293eb_under_%20appraisal_bg.png';\nexport const noListIcon = 'https://m.hellobike.com/resource/gallery/92/VY_d3wit_taichi_image.png';\n","import { IGenericFunction } from '@/services/types';\nimport pkgJson from '../../package.json';\n\nconst appEnv = process.env.NEW_MP_TYPE || 'weapp';\n// eslint-disable-next-line\nlet _codeEnv = process.env.CODE_ENV || 'pro';\nconst appName = pkgJson.appNameMapping[appEnv];\n\n// eslint-disable-next-line\nconst envTag = '';\n\nconst codeEnvCallbacks: IGenericFunction[] = [];\n\nexport default class Env {\n  /**\n   * 原始codeEnv\n   */\n  static get originCodeEnv() {\n    return _codeEnv;\n  }\n\n  /**\n   * 获取版本号\n   */\n  static get codeEnv() {\n    if (_codeEnv) {\n      return _codeEnv?.split('_')[0];\n    }\n    return _codeEnv;\n  }\n\n  /**\n   * 设置版本号\n   */\n  static set codeEnv(val) {\n    _codeEnv = val;\n    const env = this.codeEnv;\n    codeEnvCallbacks.forEach((fn: IGenericFunction) => {\n      fn(env);\n    });\n  }\n\n  /**\n   * 全局设置代码环境\n   */\n  static setCodeEnv(val: string) {\n    this.codeEnv = val;\n  }\n\n  /**\n   * 注册观察者（在环境变化时通知）\n   * @param callback - 观察者函数\n   * @return 注销回调\n   */\n  static register(callback: IGenericFunction) {\n    codeEnvCallbacks.push(callback);\n    const { length } = codeEnvCallbacks;\n    return () => {\n      codeEnvCallbacks.splice(length - 1, 1);\n    };\n  }\n\n  static get codeEnvTag() {\n    if (_codeEnv === 'fat') {\n      return envTag;\n    }\n    if (_codeEnv === 'dev') {\n      return 'dev';\n    }\n    if (_codeEnv === 'uat') {\n      return '';\n    }\n    return undefined;\n  }\n\n  /**\n   * 小程序业务版本号\n   */\n  static appVersion = pkgJson.version;\n\n  /**\n   * 小程序在各端的APP名称\n   */\n  static appName = appName;\n\n  /**\n   * 小程序工程名称\n   */\n  static projectName = pkgJson.name;\n\n  /**\n   * 小程序端类型\n   * - 枚举：weapp,alipay,tt,hello,pet,petbos,rent\n   */\n  static appEnv = appEnv;\n}\n","import { EventBus } from '@hb/taro-fusion-components';\n\nexport const LoginEvent = new EventBus('onLoginEvent');\n\nexport const TestEvent = new EventBus('TestEvent');\n","import { Native as BaseNative } from '@hb/taro-fusion-components';\n\nclass Native extends BaseNative {\n}\n\nexport default Native;\n","import { Ubt } from '@hb/taro-fusion-components';\n\n// 首页\nexport const indexUBT = new Ubt('miaowa_mp_index');\n\n// 我的页面\nexport const myUBT = new Ubt('miaowa_mp_mine');\n","import React, { Component } from 'react';\nimport { View, Image } from '@tarojs/components';\nimport Taro from '@tarojs/taro';\nimport { appraisalPassed, identifyText_icon } from '@/assets/index';\nimport './index.scss';\n\ninterface CardCellProps {\n  imageUrl: string;\n  userName?: string;\n  userAvatar?: string;\n  isVerified?: boolean;\n  result?: string;\n  description?: string;\n  onClick?: () => void;\n}\n\nexport default class CardCell extends Component<CardCellProps> {\n  handleCardClick = () => {\n    if (this.props.onClick) {\n      this.props.onClick();\n    } else {\n      // 默认跳转到鉴定结果页\n      Taro.navigateTo({\n        url: '/pages/result/result',\n      });\n    }\n  };\n\n  render() {\n    const {\n      imageUrl,\n      userName = '椰椰',\n      userAvatar,\n      isVerified = true,\n      result = '符合正品特征',\n      description = '\"小卡细节工艺符合正品特征，鉴别通过，纹路比例切角没问题\"',\n      onClick,\n    } = this.props;\n\n    return (\n      <View className='card-cell' onClick={this.handleCardClick}>\n        {/* 背景容器 */}\n        <View className='card-cell-container'>\n          {/* 在线鉴定证明标题 */}\n          <View className='card-header'>\n            <View className='header-line' />\n            <View className='header-title'>在线鉴定证明</View>\n            <View className='header-line' />\n          </View>\n\n          {/* 鉴定结果 */}\n          <View className='result-text'>{result}</View>\n          <View className='result-subtitle'>鉴别结果根据用户信息得出</View>\n\n          {/* 商品图片区域 */}\n          <View className='product-section'>\n            <View className='product-image-container'>\n              <Image src={imageUrl} className='product-image' mode='aspectFill' />\n              {/* 鉴别通过标记 */}\n              <Image src={appraisalPassed} className='verify-badge' />\n            </View>\n          </View>\n\n          {/* 底部用户信息 */}\n          <View className='bottom-section'>\n            <View className='user-info'>\n              {userAvatar && (\n                <Image src={userAvatar} className='user-avatar' />\n              )}\n              {!userAvatar && (\n                <View className='user-avatar-placeholder' />\n              )}\n              <View className='user-content'>\n                <View className='user-name-row'>\n                  {isVerified && (\n                    <View className='verified-badge'>\n                        <Image src={identifyText_icon} className='verified-icon' />\n                      <View className='verified-text'>星卡鉴定师</View>\n                    </View>\n                  )}\n                  <View className='user-name'>{userName}</View>\n                </View>\n\n              </View>\n            </View>\n            <View className='user-description'>{description}</View>\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n","import env from '@/common/env';\n\n/**\n * 系统级别的常量定义在这里，其他常量定义在 page.const.ts 中\n */\nconst appConst = {\n  CATEGORY_ID: process.env.CATEGORY_ID || '',\n  SYSTEM_CODE: process.env.SYSTEM_CODE || '',\n  PAY_CHANNEL: process.env.PAY_CHANNEL || '',\n  MINA_ORIGIN_ID: process.env.MINA_ORIGIN_ID || '',\n  LOCATION_ENABLE: process.env.LOCATION_ENABLE || 0,\n  WISHDOM_ENABLE: process.env.WISHDOM_ENABLE || 0,\n  UPDATE_ENABLE: process.env.UPDATE_ENABLE || 0,\n  API: 'https://miaowa.hellobike.com/api',\n  PLATFORM_BASE_API: 'https://api.hellobike.com/api',\n  PLATFORM_USER_API: 'https://api.hellobike.com/user',\n  PLATFORM_AUTH_API: 'https://api.hellobike.com/auth',\n};\n\n/**\n * 根据不同环境设置\n * @param codeEnv\n */\nexport function setEnvConst(codeEnv: string) {\n  if (codeEnv === 'pro') {\n    appConst.API = 'https://miaowa.hellobike.com/api';\n    appConst.PLATFORM_BASE_API = 'https://api.hellobike.com/api';\n    appConst.PLATFORM_AUTH_API = 'https://api.hellobike.com/auth';\n    appConst.PLATFORM_USER_API = 'https://api.hellobike.com/user';\n    // uat\n  } else if (codeEnv === 'uat') {\n    appConst.API = 'https://uat-miaowa.hellobike.com/api';\n    appConst.PLATFORM_BASE_API = 'https://uat-api.hellobike.com/api';\n    appConst.PLATFORM_AUTH_API = 'https://uat-api.hellobike.com/auth';\n    appConst.PLATFORM_USER_API = 'https://uat-api.hellobike.com/user';\n    // dev/test\n  } else if (codeEnv === 'fat') {\n    appConst.API = 'https://fat-miaowa.hellobike.com/api';\n    appConst.PLATFORM_BASE_API = 'https://fat-api.hellobike.com/api';\n    appConst.PLATFORM_AUTH_API = 'https://fat-api.hellobike.com/auth';\n    appConst.PLATFORM_USER_API = 'https://fat-api.hellobike.com/user';\n    // pre\n  } else if (codeEnv === 'pre') {\n    appConst.API = 'https://fat-miaowa.hellobike.com/api';\n    appConst.PLATFORM_BASE_API = 'https://fat-api.hellobike.com/api';\n    appConst.PLATFORM_AUTH_API = 'https://fat-api.hellobike.com/auth';\n    appConst.PLATFORM_USER_API = 'https://fat-api.hellobike.com/user';\n  }\n}\n\nsetEnvConst(env.codeEnv);\nenv.register(setEnvConst);\n\nexport default appConst;\n","import {\n  exampleImage1, exampleImage2, exampleImage3, exampleImage4,\n} from '@/assets/index';\n\n/** 业务级别常量  */\nexport const defaultUserAvatar = 'https://m.hellobike.com/resource/gallery/146/ZXjt3BBT_user-avatar1.png';\n\n/** 相机拍摄步骤配置 */\nexport const CAMERA_STEP_INFO = {\n  1: {\n    title: '拍摄「小卡正面」',\n    label: '小卡正面',\n    description: '裸卡状态下，将手机垂直正对卡面，靠近镜头使卡面铺满，避免角度倾斜和反光，光线充足，对焦清晰',\n    required: true,\n    image: exampleImage1,\n  },\n  2: {\n    title: '拍摄「小卡背面」',\n    label: '小卡背面',\n    description: '裸卡状态下，将手机垂直正对卡面，靠近镜头使卡面铺满，避免角度倾斜和反光，光线充足，对焦清晰',\n    required: true,\n    image: exampleImage2,\n  },\n  3: {\n    title: '拍摄「小卡正面纹路对光」',\n    label: '小卡正面纹路对光',\n    description: '光线充足，对焦清晰，卡面不要反光，能看清字体符号等细节，主要拍摄logo等文字细节',\n    required: false,\n    image: exampleImage2,\n  },\n  4: {\n    title: '拍摄「背面文字logo」',\n    label: '背面文字logo',\n    description: '裸卡状态下，将手机垂直正对卡面，靠近镜头使卡面铺满，避免角度倾斜和反光，光线充足，对焦清晰',\n    required: false,\n    image: exampleImage3,\n  },\n  5: {\n    title: '拍摄「小卡像素点」',\n    label: '小卡像素点',\n    description: '裸卡状态下，将手机垂直正对卡面，靠近镜头使卡面铺满，避免角度倾斜和反光，光线充足，对焦清晰',\n    required: false,\n    image: exampleImage4,\n  },\n} as const;\n","import { Storage, ILoginResult } from '@hb/taro-fusion-components';\nimport { observable } from 'mobx';\nimport { LoginEvent } from '@/common/events';\nimport Native from '@/common/native';\nimport { ICheckLoginOptions } from '@/services/types';\n\nconst LOGIN_RESULT_KEY = 'login_result';\nclass LoginModel {\n  /**\n   * 登录态\n   */\n  @observable loginResult = {} as ILoginResult;\n\n  /**\n   * 初始化登录态\n   */\n  initAppLogin() {\n    if (Native.IS_MPAAS) {\n      // 没有缓存，则重新获取\n      Native.getAppLoginResult().then((res) => {\n        this.setLoginResult(res);\n      }).catch(() => {\n        this.setLoginResult({} as ILoginResult);\n      });\n    } else {\n      const loginResult = Storage.getItemSync(LOGIN_RESULT_KEY) || {} as ILoginResult;\n      this.setLoginResult((loginResult || {}) as ILoginResult);\n    }\n  }\n\n  /**\n   * 登录态保护机制，常用于以下两个场景：\n   * - 仅在登录态下调用某些接口；或者不同登录态处理不同逻辑\n   * - 当登录态发生变化时，需要重新执行原来的逻辑（一般用于页面初始化监听，便于及时更新页面）\n   * @param callback 登录态初始完成后的回调函数\n   * @param options ICheckLoginOptions\n   */\n  checkLogin(callback: (isLogin: boolean) => void, options: ICheckLoginOptions = {}) {\n    this.getLoginResult().then((res) => {\n      callback(!!res.token && !!res.ticket);\n    });\n\n    const { observe = false, observeMode = 'all' } = options;\n\n    if (observe) {\n      // 关于 observe 参数：当页面销毁时，系统会自动扫描并移除监听器，无需手动回收。\n      LoginEvent.on((loginResult) => {\n        callback(!!loginResult.token && !!loginResult.ticket);\n      }, observeMode);\n    }\n  }\n\n  /**\n   * 设置登录态（登录后或注销后调用）\n   * @param loginResult ILoginResult\n   */\n  setLoginResult(loginResult: ILoginResult) {\n    this.loginResult = loginResult;\n    // MPAAS 环境无需持久化，以免App退出登录导致登录态不同步\n    if (!Native.IS_MPAAS) {\n      Storage.setItemSync(LOGIN_RESULT_KEY, loginResult, 90);\n    }\n    // 触发事件给应用层，用于做不同的逻辑处理\n    LoginEvent.trigger(loginResult);\n  }\n\n  /**\n   * 获取登录态（无论如何都返回结果）\n   * @description 优先取缓存，再从桥或本地缓存中获取，如果都没有，则返回 { }\n   * @returns ILoginResult | {}\n   */\n  async getLoginResult() {\n    // 优先取缓存\n    if (this.loginResult.token && this.loginResult.ticket) {\n      return Promise.resolve(this.loginResult);\n    }\n\n    if (Native.IS_MPAAS) {\n      // 没有缓存，则重新获取\n      return Native.getAppLoginResult().then((res) => res).catch(() => ({} as ILoginResult));\n    }\n\n    const loginResult = Storage.getItemSync(LOGIN_RESULT_KEY) || {} as ILoginResult;\n    return Promise.resolve((loginResult || {}) as ILoginResult);\n  }\n\n  /**\n   * 注销登录信息\n   */\n  logout() {\n    this.setLoginResult({} as ILoginResult);\n    Storage.removeItemSysnc(LOGIN_RESULT_KEY);\n  }\n}\n\nexport default new LoginModel();\n","import { requsetUserInfoApi, ResUserInfoVo } from '@/services/apis/app.api';\nimport { action, observable } from 'mobx';\n\nclass MyModel {\n    @observable userInfo: ResUserInfoVo = Object.call(null);\n\n    @action\n    setUserInfo(userInfo: ResUserInfoVo) {\n      this.userInfo = userInfo;\n    }\n\n    async getUserInfo() {\n      const { data } = await requsetUserInfoApi();\n      this.setUserInfo(data);\n    }\n}\n\nexport default new MyModel();\n","import { observable } from 'mobx';\n\nclass PhotoModel {\n  // 存储拍摄的照片数据\n  @observable photos: { [key: number]: string } = {};\n\n  /**\n   * 设置照片\n   * @param step 拍摄步骤 (1-4)\n   * @param photoUrl 照片URL\n   */\n  setPhoto(step: number, photoUrl: string) {\n    this.photos[step] = photoUrl;\n  }\n\n  /**\n   * 获取照片\n   * @param step 拍摄步骤 (1-4)\n   * @returns 照片URL\n   */\n  getPhoto(step: number): string | undefined {\n    return this.photos[step];\n  }\n\n  /**\n   * 获取所有照片\n   * @returns 所有照片对象\n   */\n  getAllPhotos(): { [key: number]: string } {\n    return { ...this.photos };\n  }\n\n  /**\n   * 清除所有照片\n   */\n  clearPhotos() {\n    this.photos = {};\n  }\n\n  /**\n   * 清除指定步骤的照片\n   * @param step 拍摄步骤 (1-4)\n   */\n  clearPhoto(step: number) {\n    delete this.photos[step];\n  }\n\n  /**\n   * 检查是否所有必需照片都已拍摄\n   * @returns 是否完成所有拍摄\n   */\n  isAllPhotosComplete(): boolean {\n    return !!(this.photos[1] && this.photos[2] && this.photos[3] && this.photos[4]);\n  }\n\n  /**\n   * 获取已拍摄照片数量\n   * @returns 已拍摄照片数量\n   */\n  getPhotoCount(): number {\n    return Object.keys(this.photos).length;\n  }\n\n  /**\n   * 获取拍摄步骤的描述\n   * @param step 拍摄步骤 (1-4)\n   * @returns 步骤描述\n   */\n  getStepDescription(step: number): string {\n    const descriptions = {\n      1: '小卡正面',\n      2: '小卡背面',\n      3: '背面文字logo',\n      4: '小卡像素点',\n    };\n    return descriptions[step] || '';\n  }\n\n  /**\n   * 获取拍摄步骤的标签\n   * @param step 拍摄步骤 (1-4)\n   * @returns 步骤标签\n   */\n  getStepLabel(step: number): string {\n    const labels = {\n      1: '小卡正面',\n      2: '小卡背面',\n      3: '背面文字logo',\n      4: '小卡像素点',\n    };\n    return labels[step] || '';\n  }\n}\n\nexport default new PhotoModel();\n","\nexport const getStatsInfoAction = 'pet.user.getStatisticalData';\nexport const getUserInfoAction = 'pet.user.app.user.userRegister';\nexport const toPayOrderAction = 'pet.user.app.pay.toPayOrder';\nexport const saveOrderAction = 'pet.user.app.pay.saveOrder';\n","import { Http } from '@hb/taro-fusion-components';\nimport { getUserInfoAction } from '../actions';\nimport { IAnyType } from '../types';\n\nexport interface ResUserInfoVo {\n  /**\n   * 头像\n   */\n  avatar?: string;\n  /**\n   * 昵称\n   */\n  nickname?: string;\n  /**\n   * 手机号\n   */\n  phone?: string;\n\n}\n\n/**\n * 获取用户信息\n * @returns\n */\nexport function requsetUserInfoApi() {\n  return Http.post<IAnyType, ResUserInfoVo>(getUserInfoAction);\n}\n","import Env from '@/common/env';\nimport { IJumpToAnyUrlOptions } from '@/services/types';\nimport { Native } from '@hb/taro-fusion-components';\n\n/**\n * 跳转到任意页面（小程序、Native、H5 等）\n * @param url\n * @param options IJumpToAnyUrlOptions\n */\nexport function jumpToAnyUrl(\n  url: string,\n  options: IJumpToAnyUrlOptions = {},\n) {\n  const {\n    params = {},\n    recycle,\n    closeTinyApp,\n    useAppWebView,\n    title,\n    reLaunch,\n  } = options;\n\n  const targetUrl = Native.appendQueryToUrl(url, params);\n\n  // 以 /pages/ 开头，则直接跳转\n  if (/^\\/pages\\//.test(url)) {\n    if (reLaunch) {\n      Native.reLaunch({\n        url: targetUrl,\n      });\n    } else {\n      if (Native.isTabbarPage(url)) {\n        Native.switchTab({\n          url,\n        });\n      } else {\n        Native.navigateTo({\n          url: targetUrl,\n          recycle,\n        });\n      }\n    }\n  } else if (/https?:\\/\\//.test(url)) {\n    if (Native.IS_MPAAS && useAppWebView) {\n      Native.jumpToApp(url, {\n        params,\n        closeTinyApp,\n      });\n    } else {\n      // 使用小程序的webview打开\n      jumpToWebView(targetUrl, title);\n    }\n  } else {\n    // 其他类型的地址仅mpaas可以打开\n    if (Native.IS_MPAAS) {\n      Native.jumpToApp(url, {\n        params,\n        closeTinyApp,\n      });\n    } else {\n      console.log('url format is invalid: ', targetUrl);\n      Native.showToast(`url format is invalid for ${Env.appEnv}`);\n    }\n  }\n}\n\n/**\n * 在小程序的 Webview 中打开一个网页\n * @param url https 地址，需在小程序后台配置安全域名。\n * @param title 页面标题\n */\nexport function jumpToWebView(url: string, title?: string) {\n  if (/^https:\\/\\//.test(url)) {\n    Native.navigateTo({\n      url: '/pages/webview/webview',\n      params: {\n        url,\n        title,\n      },\n    });\n  } else {\n    throw new Error('the url is invalid');\n  }\n}\n\n/**\n * 跳转到首页\n */\nexport function jumpToIndex() {\n  Native.switchTab({\n    url: '/pages/index/index',\n  });\n}\n\n/**\n * 跳转到商品详情\n * @param productId 商品id\n */\nexport function jumpToProductDetail(productId?: string) {\n  Native.navigateTo({\n    url: '/pages/cathouse/cathouse-detail/cathouse-detail',\n    params: {\n      productId,\n    },\n  });\n}\n"],"names":[],"sourceRoot":""}