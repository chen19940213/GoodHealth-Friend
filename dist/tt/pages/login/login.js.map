{"version":3,"file":"pages/login/login.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://AppStarCardWXSS/./src/pages/login/login.tsx?1340","webpack://AppStarCardWXSS/./src/pages/login/login.tsx"],"sourcesContent":["import _classCallCheck from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _class;\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { Component, Fragment } from 'react';\nimport { Button, View } from '@tarojs/components';\nimport { PageSkeleton, Native } from '@hb/taro-fusion-components';\nimport { observer } from 'mobx-react';\nimport Taro from '@tarojs/taro';\nimport loginModel from '@/models/loginModel';\nimport './login.scss';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = observer(_class = /*#__PURE__*/function (_Component) {\n  function Login() {\n    var _this;\n    _classCallCheck(this, Login);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Login, [].concat(args));\n    _defineProperty(_this, \"handleBack\", function () {\n      Native.navigateBack();\n    });\n    _defineProperty(_this, \"handleLoginSuccess\", function (res) {\n      loginModel.setLoginResult(res);\n      Native.showToast('登录成功');\n      setTimeout(function () {\n        _this.handleBack();\n      }, 500);\n    });\n    _defineProperty(_this, \"handleLoginFail\", function (error) {\n      Native.showToast(error.message);\n    });\n    // 微信授权登录\n    _defineProperty(_this, \"handleWxAuth\", function () {\n      Taro.getUserProfile({\n        desc: '用于完善用户资料',\n        success: function success(res) {\n          // 这里可以调用后端接口进行登录\n          console.error(res);\n          _this.handleWxLogin(res.userInfo);\n        },\n        fail: function fail() {\n          Native.showToast('获取用户信息失败');\n        }\n      });\n    });\n    // 微信登录处理\n    _defineProperty(_this, \"handleWxLogin\", function (userInfo) {\n      Taro.login({\n        success: function success(loginRes) {\n          if (loginRes.code) {\n            // 这里应该调用后端接口，传递code和userInfo进行登录\n\n            // 模拟登录成功，实际应该调用后端接口\n            var mockLoginResult = {\n              token: \"mock_token_\".concat(Date.now()),\n              ticket: \"mock_ticket_\".concat(Date.now()),\n              userInfo: {\n                nickname: userInfo.nickName,\n                avatar: userInfo.avatarUrl,\n                gender: userInfo.gender,\n                city: userInfo.city,\n                province: userInfo.province,\n                country: userInfo.country\n              }\n            };\n            _this.handleLoginSuccess(mockLoginResult);\n          } else {\n            Native.showToast('微信登录失败');\n          }\n        },\n        fail: function fail() {\n          Native.showToast('微信登录失败');\n        }\n      });\n    });\n    return _this;\n  }\n  _inherits(Login, _Component);\n  return _createClass(Login, [{\n    key: \"componentDidShow\",\n    value: function componentDidShow() {\n      Native.hideHomeButton();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsx(PageSkeleton, {\n        className: \"page-login-view\",\n        children: /*#__PURE__*/_jsxs(Fragment, {\n          children: [/*#__PURE__*/_jsx(View, {\n            className: \"top-gradient-bg\"\n          }), /*#__PURE__*/_jsx(View, {\n            className: \"back-btn\",\n            onClick: this.handleBack,\n            children: /*#__PURE__*/_jsx(View, {\n              className: \"back-icon\"\n            })\n          }), /*#__PURE__*/_jsxs(View, {\n            className: \"logo-section\",\n            children: [/*#__PURE__*/_jsx(View, {\n              className: \"logo-box\",\n              children: /*#__PURE__*/_jsx(View, {\n                className: \"logo-text\",\n                children: \"\\u661F\\u5361\"\n              })\n            }), /*#__PURE__*/_jsx(View, {\n              className: \"slogan\",\n              children: \"\\u4E2D\\u68C0\\u3001\\u6D77\\u5173\\u4E92\\u8BA4\\u7684AI\\u9274\\u5B9A\\u56E2\\u4F53\\u6807\\u51C6\"\n            })]\n          }), /*#__PURE__*/_jsxs(View, {\n            className: \"login-actions\",\n            children: [/*#__PURE__*/_jsx(Button, {\n              className: \"wx-auth-btn\",\n              onClick: this.handleWxAuth,\n              children: \"\\u5FAE\\u4FE1\\u6388\\u6743\\u767B\\u5F55\"\n            }), /*#__PURE__*/_jsx(View, {\n              className: \"phone-login-text\",\n              children: \"\\u624B\\u673A\\u53F7\\u767B\\u5F55/\\u6CE8\\u518C\"\n            })]\n          })]\n        }, \"scroll\")\n      });\n    }\n  }]);\n}(Component)) || _class;\nexport { Login as default };","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/login/login!./login.tsx\"\nvar config = {\"navigationBarTitleText\":\"登录\",\"navigationStyle\":\"custom\"};\n\n\n\nvar taroOption = createPageConfig(component, 'pages/login/login', {root:{cn:[]}}, config || {})\nif (component && component.behaviors) {\n  taroOption.behaviors = (taroOption.behaviors || []).concat(component.behaviors)\n}\nvar inst = Page(taroOption)\n\n\n\nexport default component\n"],"names":[],"sourceRoot":""}