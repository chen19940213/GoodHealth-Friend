{"version":3,"file":"pages/cathouse/cathouse-detail/cathouse-detail.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAKA;AAAA;AAAA;AAMA;AAAA;AACA;AAGA;AAAA;AAAA;AAGA;;;;;;;;;;;;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;;AAEA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AApBA;AAAA;AAAA;AAAA;AAsBA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;;;;;;;;;;;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACdA;AACA;;AAEA;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;;AAIA;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://AppStarCardWXSS/./src/pages/cathouse/cathouse-detail/cathouse-detail.tsx?1d65","webpack://AppStarCardWXSS/./node_modules/@hb/taro-fusion-components/esm/apis/Pay/api.js","webpack://AppStarCardWXSS/./node_modules/@hb/taro-fusion-components/esm/apis/Pay/index.js","webpack://AppStarCardWXSS/./node_modules/@hb/taro-fusion-components/esm/utils/appenv.js","webpack://AppStarCardWXSS/./src/assets/cathouse/index.ts","webpack://AppStarCardWXSS/./src/components/cathouse/CatHouseDataView/index.tsx","webpack://AppStarCardWXSS/./src/models/catHouseModel.ts","webpack://AppStarCardWXSS/./src/pages/cathouse/cathouse-detail/cathouse-detail.tsx","webpack://AppStarCardWXSS/./src/services/apis/cathouse.api.ts"],"sourcesContent":["import _objectSpread from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _defineProperty from \"/Users/chenwenying/Desktop/\\u661F\\u706B\\u5DE5\\u574A-sparkLab/AppStarCardWXSS/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _class;\nimport React, { Component, Fragment } from 'react';\nimport { observer } from 'mobx-react';\nimport { Button, View, Swiper, SwiperItem } from '@tarojs/components';\nimport { PageHeader, PageSkeleton, Native, OssImage, SafeAreaView } from '@hb/taro-fusion-components';\nimport CatHouseDataView from '@/components/cathouse/CatHouseDataView';\nimport catHouseModel from '@/models/catHouseModel';\nimport loginModel from '@/models/loginModel';\nimport './cathouse-detail.scss';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CatHouseDetail = observer(_class = /*#__PURE__*/function (_Component) {\n  function CatHouseDetail() {\n    var _this;\n    _classCallCheck(this, CatHouseDetail);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, CatHouseDetail, [].concat(args));\n    _defineProperty(_this, \"gotoPay\", function () {\n      loginModel.checkLogin(function (isLogin) {\n        if (isLogin) {\n          catHouseModel.doPay();\n        } else {\n          Native.showToast({\n            title: '请先登录'\n          });\n        }\n      }, {\n        observe: true\n      });\n    });\n    return _this;\n  }\n  _inherits(CatHouseDetail, _Component);\n  return _createClass(CatHouseDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Native.hideHomeButton();\n    }\n    /**\n     * 小程序分享配置\n     * @param options\n     * @returns\n     */\n  }, {\n    key: \"onShareAppMessage\",\n    value: function onShareAppMessage(options) {\n      return Native.getShareAppOptions(_objectSpread(_objectSpread({}, options), {}, {\n        title: '谷阳北路猫猫屋',\n        desc: '分享一个猫猫的故事',\n        path: Native.getPagePath({\n          query: true\n        }) || '/pages/index/index',\n        imageUrl: 'https://m.hellobike.com/resource/helloyun/23756/JGFhfKegoE.jpg',\n        targetType: 'mini',\n        shareType: [1],\n        callback: function callback(res) {\n          Native.showToast(res.errorMessage);\n          console.log('onShareAppMessage', res);\n        }\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsxs(PageSkeleton, {\n        className: \"page-detail-view\",\n        headerWithFadeInOut: true,\n        customProps: {\n          // 隐藏elf\n          hideElf: true\n        },\n        children: [/*#__PURE__*/_jsx(Fragment, {\n          children: /*#__PURE__*/_jsx(PageHeader, {\n            useBgColorForCustomBackIcon: true,\n            useBgColorForNativeBackIcon: true,\n            isGhost: true\n          })\n        }, \"backheader\"), /*#__PURE__*/_jsx(Fragment, {\n          children: /*#__PURE__*/_jsx(PageHeader, {\n            useBgColorForCustomBackIcon: true,\n            title: \"\\u732B\\u5C4B\\u8BE6\\u60C5\",\n            backIconColor: \"black\"\n          })\n        }, \"leaveheader\"), /*#__PURE__*/_jsxs(Fragment, {\n          children: [/*#__PURE__*/_jsxs(Swiper, {\n            className: \"cathouse-header-view\",\n            autoplay: true,\n            circular: true\n            /** 修复了 `adjustHeight` 不生效的问题 */,\n            adjustHeight: \"none\",\n            indicatorDots: true,\n            children: [/*#__PURE__*/_jsx(SwiperItem, {\n              children: /*#__PURE__*/_jsx(OssImage, {\n                className: \"cathouse-cover\",\n                mode: \"aspectFill\",\n                src: \"https://m.hellobike.com/resource/helloyun/23756/JGFhfKegoE.jpg\"\n              })\n            }), /*#__PURE__*/_jsx(SwiperItem, {\n              children: /*#__PURE__*/_jsx(OssImage, {\n                className: \"cathouse-cover\",\n                mode: \"aspectFill\",\n                src: \"https://m.hellobike.com/resource/gallery/146/WH7JGaID_shelves-ranking-bg.jpg\"\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(View, {\n            className: \"cathouse-content-view\",\n            children: [/*#__PURE__*/_jsxs(View, {\n              className: \"cathouse-name\",\n              children: [\"\\u8C37\\u9633\\u5317\\u8DEF\\u732B\\u732B\\u5C4B\", /*#__PURE__*/_jsx(Button, {\n                className: \"share-btn\",\n                openType: \"share\",\n                children: /*#__PURE__*/_jsx(OssImage, {\n                  mode: \"aspectFill\",\n                  width: 80,\n                  className: \"share-icon\",\n                  src: \"https://m.hellobike.com/resource/gallery/146/ckAPp2NW_share.png\"\n                })\n              })]\n            }), /*#__PURE__*/_jsx(CatHouseDataView, {})]\n          })]\n        }, \"scroll\"), /*#__PURE__*/_jsx(Fragment, {\n          children: /*#__PURE__*/_jsxs(SafeAreaView, {\n            safeAreaInsetBottom: true,\n            children: [/*#__PURE__*/_jsx(View, {\n              className: \"cathouse-pay-btn\",\n              onClick: this.gotoPay,\n              children: \"\\u9A8C\\u8BC1\\u652F\\u4ED8\"\n            }), /*#__PURE__*/_jsx(View, {\n              className: \"cathouse-pay-tips\",\n              children: \"\\u8BF7\\u5728FAT\\u73AF\\u5883\\u4E0B\\u9A8C\\u8BC1\\uFF08\\u5176\\u4ED6\\u73AF\\u5883\\u6CA1\\u6709\\u6570\\u636E\\uFF09\"\n            })]\n          })\n        }, \"footer\")]\n      });\n    }\n  }]);\n}(Component)) || _class;\nexport { CatHouseDetail as default };","import { getBaseUrl } from '../../utils/appenv';\nimport { Http } from '../Http';\n/**\n * 请求待支付确认参数，用于唤起支付收银台\n * @param data\n * @param baseUrl\n * @returns\n */\nexport function requestConfirmPayApi(data, codeEnv) {\n  var url = 'com.alphapay.paymentOrder.pay';\n  return Http.post(url, data, {\n    baseURL: getBaseUrl(codeEnv).API,\n    catchErrorCode: true\n  });\n}","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport NBridge from '@hb/NBridge';\nimport Taro from '@tarojs/taro';\nimport { requestConfirmPayApi } from './api';\nimport { PureNative } from '../Native';\nimport { createErrorObject } from '../../utils/shared';\nexport var Pay = /*#__PURE__*/function () {\n  function Pay() {\n    _classCallCheck(this, Pay);\n  }\n  return _createClass(Pay, null, [{\n    key: \"config\",\n    value:\n    /**\n     * 支付基础配置（必须）\n     * @param options 配置项 IBasePayOptions\n     * @supported weapp,alipay,mpaas\n     */\n    function config(options) {\n      this.basePayOptions = _objectSpread(_objectSpread({}, this.basePayOptions), options);\n    }\n\n    /**\n     * 支付宝支付\n     * @param params RequestPayParams\n     */\n  }, {\n    key: \"requestAlipayPay\",\n    value: function requestAlipayPay(params) {\n      var _this$basePayOptions = this.basePayOptions,\n        defaultPayChannel = _this$basePayOptions.payChannel,\n        defaultSystemCode = _this$basePayOptions.systemCode,\n        defaultBusinessType = _this$basePayOptions.businessType;\n      var guid = params.guid,\n        amount = params.amount,\n        orderId = params.orderId,\n        token = params.token,\n        _params$payChannel = params.payChannel,\n        payChannel = _params$payChannel === void 0 ? defaultPayChannel : _params$payChannel,\n        _params$systemCode = params.systemCode,\n        systemCode = _params$systemCode === void 0 ? defaultSystemCode : _params$systemCode,\n        _params$businessType = params.businessType,\n        businessType = _params$businessType === void 0 ? defaultBusinessType : _params$businessType;\n      var requestParams = {\n        amount: amount,\n        channel: payChannel,\n        systemCode: systemCode,\n        orders: [{\n          amount: amount,\n          guid: guid,\n          orderId: orderId,\n          businessType: businessType\n        }],\n        token: token\n      };\n      return new Promise(function (resolve, reject) {\n        requestConfirmPayApi(requestParams, PureNative.codeEnv).then(function (res) {\n          if (res.code === 0) {\n            var _ref = res.data.credential || {},\n              orderStr = _ref.params;\n            my.tradePay({\n              orderStr: orderStr,\n              success: function success(data) {\n                var _ref2 = data || {},\n                  resultCode = _ref2.resultCode,\n                  memo = _ref2.memo;\n                // 支付成功\n                if (resultCode === '9000') {\n                  resolve({\n                    errCode: 0,\n                    errMsg: 'pay success'\n                  });\n                } else {\n                  reject(createErrorObject(memo));\n                }\n              },\n              fail: function fail(error) {\n                reject(createErrorObject(error));\n              }\n            });\n          } else {\n            reject(createErrorObject(res.msg || ''));\n          }\n        });\n      });\n    }\n\n    /**\n     * MPAAS小程序支付\n     * @param params\n     * @returns\n     */\n  }, {\n    key: \"requestMpaasPay\",\n    value: function requestMpaasPay(params) {\n      var defaultBusinessType = this.basePayOptions.businessType;\n      var guid = params.guid,\n        amount = params.amount,\n        orderId = params.orderId,\n        businessScene = params.businessScene,\n        _params$businessType2 = params.businessType,\n        businessType = _params$businessType2 === void 0 ? defaultBusinessType : _params$businessType2;\n      var requestParams = {\n        businessType: businessType,\n        businessScene: businessScene,\n        payMoney: amount,\n        payList: [{\n          amount: amount,\n          guid: guid,\n          businessType: businessType,\n          orderId: orderId,\n          type: '1'\n        }]\n      };\n      return new Promise(function (resolve, reject) {\n        NBridge.requestPayment(_objectSpread(_objectSpread({}, requestParams), {}, {\n          success: function success() {\n            resolve({\n              errCode: 0,\n              errMsg: 'pay success'\n            });\n          },\n          fail: function fail(error) {\n            reject(createErrorObject(error));\n          }\n        }));\n      });\n    }\n\n    /**\n     * 微信支付\n     * @param params\n     * @returns\n     */\n  }, {\n    key: \"requestWxPay\",\n    value: function requestWxPay(params) {\n      var _this$basePayOptions2 = this.basePayOptions,\n        defaultPayChannel = _this$basePayOptions2.payChannel,\n        defaultSystemCode = _this$basePayOptions2.systemCode,\n        defaultBusinessType = _this$basePayOptions2.businessType;\n      var guid = params.guid,\n        amount = params.amount,\n        orderId = params.orderId,\n        openId = params.openId,\n        token = params.token,\n        _params$payChannel2 = params.payChannel,\n        payChannel = _params$payChannel2 === void 0 ? defaultPayChannel : _params$payChannel2,\n        _params$systemCode2 = params.systemCode,\n        systemCode = _params$systemCode2 === void 0 ? defaultSystemCode : _params$systemCode2,\n        _params$businessType3 = params.businessType,\n        businessType = _params$businessType3 === void 0 ? defaultBusinessType : _params$businessType3;\n      var requestParams = {\n        amount: amount,\n        channel: payChannel,\n        systemCode: systemCode,\n        orders: [{\n          amount: amount,\n          guid: guid,\n          orderId: orderId,\n          businessType: businessType\n        }],\n        extra: JSON.stringify({\n          openId: openId\n        }),\n        token: token\n      };\n      return new Promise(function (resolve, reject) {\n        requestConfirmPayApi(requestParams, PureNative.codeEnv).then(function (res) {\n          if (res.code === 0) {\n            var extra = res.data.extra;\n            var _ref3 = extra || {},\n              timeStamp = _ref3.timeStamp,\n              nonceStr = _ref3.nonceStr,\n              paySign = _ref3.paySign;\n            Taro.requestPayment({\n              timeStamp: timeStamp,\n              nonceStr: nonceStr,\n              \"package\": extra[\"package\"],\n              signType: 'MD5',\n              paySign: paySign,\n              success: function success() {\n                resolve({\n                  errCode: 0,\n                  errMsg: 'pay success'\n                });\n              },\n              fail: function fail(error) {\n                reject(createErrorObject(error));\n              }\n            });\n          } else {\n            reject(createErrorObject(res.msg || ''));\n          }\n        });\n      });\n    }\n\n    /**\n     * 发起支付，调用成功时会唤起收银台支付\n     * @param params 支付请求参数 IRequestPayParams\n     * @supported weapp,alipay,mpaas\n     */\n  }, {\n    key: \"request\",\n    value: function request(params) {\n      if (PureNative.IS_WEAPP) {\n        return this.requestWxPay(params);\n      }\n      if (PureNative.IS_MPAAS) {\n        return this.requestMpaasPay(params);\n      }\n      if (PureNative.IS_ALIPAY) {\n        return this.requestAlipayPay(params);\n      }\n      return this.requestWxPay(params);\n    }\n  }]);\n}();\n_defineProperty(Pay, \"basePayOptions\", {\n  businessType: 0,\n  payChannel: '',\n  systemCode: ''\n});","var baseUrl = {\n  API: 'https://api.hellobike.com/api/'\n};\n\n/**\n * 根据 codeEnv 获取baseUrl\n * @param codeEnv\n * @returns\n */\nexport function getBaseUrl(codeEnv) {\n  if (codeEnv !== 'pro') {\n    baseUrl.API = \"https://\".concat(codeEnv, \"-api.hellobike.com/api/\");\n  }\n  return baseUrl;\n}","\nexport const IMG_xuhang = 'https://m.hellobike.com/resource/helloyun/29354/E7iTn_dianchi.png';\nexport const IMG_donggan = 'https://m.hellobike.com/resource/helloyun/wb21675/1DWMU_lyophilization.png';\nexport const IMG_maoliang = 'https://m.hellobike.com/resource/helloyun/22132/A6Peq_maoliang.png';\nexport const IMG_feedgs = 'https://m.hellobike.com/resource/helloyun/23756/lYpmS_WechatIMG187.png';\nexport const IMG_feedpeople = 'https://m.hellobike.com/resource/helloyun/23756/FNbnKE7sHh.png';\nexport const IMG_rundays = 'https://m.hellobike.com/resource/helloyun/23756/n0lJk_WechatIMG190.png';\n","import React, { Component } from 'react';\nimport { Text, View } from '@tarojs/components';\nimport { OssImage } from '@hb/taro-fusion-components';\nimport {\n  IMG_donggan, IMG_feedgs, IMG_feedpeople, IMG_maoliang, IMG_rundays, IMG_xuhang,\n} from '@/assets/cathouse';\nimport './index.scss';\n\n\nclass CatHouseDataView extends Component {\n  state = {\n    runDataList: [\n      {\n        iconUrl: IMG_xuhang,\n        data: 6,\n        title: '剩余续航天数',\n        unit: '天',\n      },\n      {\n        iconUrl: IMG_donggan,\n        data: 91,\n        title: '当前冻干',\n        unit: '%',\n      },\n      {\n        iconUrl: IMG_maoliang,\n        data: 85,\n        title: '当前猫粮',\n        unit: '%',\n      },\n      {\n        iconUrl: IMG_feedgs,\n        data: 31.0,\n        title: '总投喂克数',\n        unit: '万克',\n      },\n      {\n        iconUrl: IMG_feedpeople,\n        data: 5723,\n        title: '投喂过的人数',\n        unit: '人',\n      },\n      {\n        iconUrl: IMG_rundays,\n        data: 550,\n        title: '已持续运行天数',\n        unit: '天',\n      },\n    ],\n  }\n\n  render() {\n    const { runDataList } = this.state;\n    return (\n      <View className=\"com-cathouse-data-view\">\n        <View className=\"run-data-view\">\n          {\n            runDataList.map((item, index) => (\n              <View key={index} className='run-data-item'>\n                <OssImage mode=\"widthFix\" className='icon' src={item.iconUrl} />\n                <View className='data'>\n                  {item.data}\n                  <Text className='unit'>{item.unit}</Text>\n                </View>\n                <View className='title'>{item.title}</View>\n              </View>\n            ))\n          }\n        </View>\n        <View className=\"cathouse-story\">\n          <View className='title'>猫猫的故事</View>\n          <View className='content'>\n            <View className='dl'>遇见小灰</View>\n              在一个风和日丽的下午，我像往常一样在小区的花园里散步。突然，一只瘦弱的小猫从草丛中钻了出来，它的眼神中充满了恐惧和无助。\n              我蹲下身来，轻轻地抚摸着小猫，发现它身上有多处伤口，显然是被其他动物攻击过。小猫的眼神让我心生怜悯，我决定带它回家救治。\n            <View className='dl'>救治与康复</View>\n              回到家中，我立即为小猫进行了简单的包扎，并联系了附近的动物医院。兽医检查后发现，\n              小猫不仅有外伤，还有轻微的营养不良。我决定给它取名“小灰”，并开始为它制定详细的康复计划。\n              每天，我都会为小灰准备营养丰富的食物，陪它玩耍，帮助它恢复体力。\n              经过一个月的悉心照料，小灰的伤口逐渐愈合，身体也变得健壮起来。\n            <View className='dl'>寻找新家</View>\n              看着小灰活泼的样子，我决定为它寻找一个温暖的新家。我通过社交媒体发布了小灰的照片和故事，\n              很快就有许多爱心人士联系我，表示愿意收养小灰。经过筛选，我最终选择了张阿姨作为小灰的新主人。\n              张阿姨是一位退休教师，她对动物充满爱心，家里也有足够的空间和时间照顾小灰。\n              在我的陪伴下，小灰被安全地送到了张阿姨的家中。张阿姨对小灰的到来非常高兴，她承诺会像对待自己的孩子一样照顾它。\n              小灰终于找到了一个温暖的家，开始了它新的生活。\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n\nexport default CatHouseDataView;\n","import Native from '@/common/native';\nimport appConst from '@/constants/app.const';\nimport { requestOrderServiceIfaceApi, requestSaveOrderApi, requestToPayOrderApi } from '@/services/apis/cathouse.api';\nimport loginModel from './loginModel';\nimport { Pay } from '@hb/taro-fusion-components';\n\nclass CatHouseModel {\n\n  createOrder() {\n    const params = {\n      applyOrderId: \"5410379339760926721\",\n      coinType: 2,\n      orderSource: 3,\n      paySkuName: \"1个月吃饱饱\",\n      paymoneyValue: 0.3,\n      paymoneykey: \"apply_pay_key6\",\n    }\n    return requestSaveOrderApi(params);\n  }\n\n  randomStr(length: number): string {\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let result = '';\n    const charactersLength = characters.length;\n    for (let i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  }\n\n  randomInt(min: number, max: number): number {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n\n  /**\n   * 创建待支付订单\n   * @returns \n   */\n  async createTtPayOrder() {\n    const { guid: userGuid, userNewId = 0 } = await loginModel.getLoginResult();\n    \n    return requestOrderServiceIfaceApi({\n      PayOrderCondition: {\n        directPay: 1,\n        amount: 0.1,\n        reminder: 1,\n        orderId: this.randomInt(1, 10000000000000).toString(),\n        cityCode: \"021\",\n        businessId: this.randomStr(32),\n        chargeType: '4001',\n        userGuid,\n        showDetail: 1,\n        orderTime: new Date().getTime().toString(),\n        userNewId,\n        payedNotify: 1,\n        businessType: 40\n      }\n    })\n  }\n\n  /**\n   * 创建待支付订单\n   * @returns \n   */\n  async createPayOrder() {\n    if (Native.IS_TT) {\n      return this.createTtPayOrder().then(({ data }) => {\n        const {amount, guid} = data;\n        return {\n          businessType: 28,\n          businessScene: 1,\n          guid,\n          amount,\n        }\n      });\n    } else {\n      const { data } = await this.createOrder()\n      const { orderId = '', tradeOrderId = '' } = data;\n      return requestToPayOrderApi({ orderId, tradeOrderId }).then(({ data }) => {\n        let { businessType = 0, businessScene = 0, payPrice: amount, payNo: guid } = data;  \n        return {\n          businessType,\n          businessScene,\n          amount,\n          guid\n        };\n      });\n    }\n  }\n\n  doPay() {\n    this.createPayOrder().then(async (data) => {\n      let { businessType = 0, businessScene = 0, amount, guid = '' } = data;\n      \n      const { token, openId = '' } = await loginModel.getLoginResult();\n\n      Pay.request({\n        systemCode: appConst.SYSTEM_CODE,\n        payChannel: appConst.PAY_CHANNEL,\n        businessType,\n        businessScene,\n        guid,\n        amount: String(amount),\n        token,\n        openId,\n      }).then(() => {\n        Native.showToast({\n          title: '支付成功',\n        });\n      }).catch((error) => {\n        Native.showToast({\n          title: error.message,\n        });\n        console.error('支付失败', error);\n      })\n    });\n  }\n}\n\nexport default new CatHouseModel();\n\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/cathouse/cathouse-detail/cathouse-detail!./cathouse-detail.tsx\"\nvar config = {\"navigationBarTitleText\":\"\",\"navigationBarBackgroundColor\":\"#fff\",\"navigationStyle\":\"custom\",\"enableShareAppMessage\":true};\n\ncomponent.enableShareAppMessage = true\n\nvar taroOption = createPageConfig(component, 'pages/cathouse/cathouse-detail/cathouse-detail', {root:{cn:[]}}, config || {})\nif (component && component.behaviors) {\n  taroOption.behaviors = (taroOption.behaviors || []).concat(component.behaviors)\n}\nvar inst = Page(taroOption)\n\n\n\nexport default component\n","import { Http } from \"@hb/taro-fusion-components\";\nimport { saveOrderAction, toPayOrderAction } from \"../actions\";\n\n// 增加去支付的接口\nexport interface ReqToPayOrder {\n    orderId?: string; /** 内部订单ID */\n    payAmount?: string; /** 支付金额 */\n    tradeOrderId: string; /** 交易订单号 */\n}\n\nexport interface ResToPayOrder {\n    payPrice?: number; /** 支付金额 */\n    orderId?: number; /** 订单ID */\n    tradeOrderId?: string; /** 交易平台订单号 */\n    payNo?: string; /** 支付凭证号，用于调起收银台支付 */\n    businessType?: number; /** 交易定义 */\n    businessScene?: number; /** 交易定义 */\n}\n\n/**\n * 增加去支付的接口Api\n * @param data\n * @returns\n */\nexport function requestToPayOrderApi(data: ReqToPayOrder) {\n    return Http.post<ReqToPayOrder, ResToPayOrder>(\n        toPayOrderAction,\n        data\n    )\n}\n\n\n\n// 增加创建订单接口\nexport interface ReqSaveOrder {\n    applyOrderId: string; /** 申请单ID(支持猫屋时必传） */\n    paymoneykey: string; /** 购买类型 */\n    paySkuName: string; /** 支持信息描述(支持猫屋时必传） */\n    paymoneyValue: number; /** 购买值(支持猫屋时必传） */\n    orderId?: string; /** 订单ID */\n    coinType?: number; /** 1-充值 2-众筹(支持猫屋时必传2）3-充值+众筹 5-购买会员卡 6-领券支付 7tnr 众筹  8 猫屋联营租赁  14 实物心愿单众筹 */\n    orderSource?: number; /** 订单来源 */\n    discountId?: string; /** 券id */\n    coinNum?: number; /** 抵扣爱心币数 */\n    userCouponId?: string; /** 用户优惠券id */\n    businessId?: string; /** 业务id，如战区id，实物众筹，战区全包传 */\n  }\n  \n  \n  export interface ResSaveOrder {\n    payPrice?: number; /** 注释 */\n    orderId?: string; /** 注释 */\n    tradeOrderId?: string; /** 注释 */\n    name?: string; /** 注释 */\n    crowdFundingNum?: number; /** 注释 */\n    crowdFundingTargetNum?: number; /** 注释 */\n    supportPersonNum?: number; /** 注释 */\n    money?: number; /** 注释 */\n    crowdPercentage?: number; /** 注释 */\n  }\n  \n  /**\n   * 增加创建订单接口Api\n   * @param data\n   * @returns\n   */ \n  export function requestSaveOrderApi(data: ReqSaveOrder) { \n    return Http.post<ReqSaveOrder,ResSaveOrder>( \n      saveOrderAction,\n      data\n    )\n  }\n\nexport interface ReqOrderServiceIface {\n  PayOrderCondition?: PayOrderCondition; /** 注释 */\n}\n\nexport interface PayOrderCondition {\n  businessId: string; /** 业务方单号 */\n  chargeType: string; /** 账户操作类型，需要事先与支付平台协商定义 */\n  amount: number; /** 订单金额 */\n  userGuid: string; /** 用户guid，如果是企业用户则为企业管理员 */\n  cityCode?: string; /** 城市code */\n  systemCode?: string; /** 系统 */\n  businessType: number; /** 业务方类型1.单车 2.助力车 3.电动车直租 4.打车 5.顺风车 6. 9. */\n  showDetail: number; /** 是否展示订单详情按钮0.是  1.否 */\n  payedNotify: number; /** 支付完成通知0.否 1.是 */\n  orderId: string; /** 业务单号，业务线唯一 */\n  directPay: number; /** 是否直接付款 0-是 1-否 */\n  userNewId: number; /** 用户newId，如果是企业用户则为企业管理员 */\n  orderTime?: string; /** 业务订单创建时间 */\n  reminder?: number; /** 催收标识，0:催收（默认），1:不催收 */\n}\n\nexport interface ExtraMap {\n  productType?: number; /** 透传支付，产品类型\t1  -  支卡通 */\n}\n\n\nexport interface ResOrderServiceIface {\n  resultJson: string;\n  guid?: string; /** 注释 */\n  businessId?: string; /** 注释 */\n  userGuid?: string; /** 注释 */\n  amount?: number; /** 注释 */\n  chargeStatus?: number; /** 注释 */\n  payStatus?: string; /** 注释 */\n}\n\n/**\n * 创建待支付订单（tt）\n * @param data \n * @returns \n */ \nexport function requestOrderServiceIfaceApi(data: ReqOrderServiceIface) { \n  return Http.post<any,ResOrderServiceIface>( \n    'https://fat-rabbit.hellobike.cn/api/rpc/method/invoke',\n    {\n      appId: \"AppTravelFeeCollectionFacadeService\",\n      iface: \"com.hellobike.fee.facade.ifaces.OrderServiceIface\",\n      method: \"createOrder\",\n      param: data.PayOrderCondition\n    },\n    {\n      catchErrorCode: true,\n    }\n  ).then((res) => {\n    if (res.code === 0) {\n      // @ts-ignore \n      const json = res.resultJson || '{}';\n      return JSON.parse(json);\n    }\n    return res;\n  })\n}\n\n  \n"],"names":[],"sourceRoot":""}